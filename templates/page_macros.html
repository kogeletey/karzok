{# table of content #}
{% macro toc(page) %}
<aside id="toc" class="nav toc">
    <span class="font-17"> In this article: </span>
    <a aria-label="close button" href="#close" class="nav__close" role="button">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" width="32" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z" fill="currentColor"></path></svg>
    </a>
    <ul class="toc-ul">
        {% for h1 in page.toc %}
        <li class="toc-li"> <a aria-label="{{ h1.id }}" class="toc-a" href="{{ h1.permalink | safe }}"> {{ h1.title }} </a></li>
        {% endfor %}
    </ul>
</aside>
{% endmacro %}

<!-- sidebar -->
{% macro sidebar(current_url) %}
    {% set index = get_section(path="_index.md") %}
    <nav id="sidebar" class="nav sidebar" >
        <a aria-label="close button" href="#close" class="nav__close" role="button">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" width="32" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z" fill="currentColor"></path></svg>
    </a>
    <ul>
    {% if index.pages %}
    {% for page in index.pages %}
    <li class="sidebar__pages {% if current_url == page.permalink %} sidebar__active-pages{% endif %}">
            <a class="sidebar__pages-link {% if current_url == page.permalink %} sidebar__active-link {%endif%}" href="{{ page.permalink | safe  }}">
                <span> {{page.title }} </span>
            </a>
        </li>
    {% endfor %}
    {% endif %}
        {% if index.subsections %}
        {% for s in index.subsections %}
        {% set subsection = get_section(path=s) %}
        <li class="sidebar__subsection-page">
          <input id="sidebar__toggle" class="sidebar__toggle" type="checkbox" {% if current_path is starting_with(subsection.path) %}checked{% endif %}>
        <svg class="sidebar__toggle-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16L12 26l-1.4-1.4l8.6-8.6l-8.6-8.6L12 6z"></path></svg>
        <label for="sidebar__toggle">
          {{ subsection.title }}
        </label>
        <ul class="sidebar__subsection">
            {% if subsection.pages %}
            {% for page in subsection.pages %}
            <li class="sidebar-link {% if current_url == page.permalink %} sidebar__active-pages{% endif %}">
                <a class="sidebar__pages-link {% if current_url == page.permalink %} sidebar__active-link {%endif%}"  href="{{ page.permalink | safe}}">
                    <span> {{page.title }} </span>
                </a>
            </li>
            {% endfor %}
            {% endif%}
            </ul>
        </li>
            {% endfor %}
    {% endif %}
    </ul>
</nav>
{% endmacro %}

{% macro relative_path() %}
{% if config.extra.relative_path or page.extra.relative_path %}
    {% for parent in page.ancestors %}
    {% set s = get_section(path=parent, include_pages=false) %}
    <li class="sections-no-padding">
        <a aria-label="{{ s.title }}" href="{{s.permalink}}">/{{s.title | lower }}</a>
    </li>
    {% endfor %}
    <li> <a aria-label="{{ page.slug }}" href="{{ page.permalink }}">/{{ page.slug }}</a></li>
    {% endif %}
{% endmacro %}

{% macro taxonomies_authors() %}
{% if page.taxonomies.authors %}
    <li>
    <span> Authors:  </span>
    {% for author in page.taxonomies.authors %}
      <li>
        <!--  <a href="{{ get_taxonomy_url(kind="authors",name=author) | safe }}"> -->
        <span>{{ author }}</span>
        <!-- </a> -->
      </li>
    {% endfor %}
    </li>
{% endif %}
{% endmacro %}

{% macro date() %}
{% if page.date %}
    <li><time> date: {{ page.date | date(format="%F") }}</time></li>
{% endif %}
{% endmacro %}

{% macro updated() %}
{% if page.updated %}
  <li><time> updated: {{ page.updated | date(format="%F") }}</time></li>
{% endif %}
{% endmacro %}

{% macro word_count() %}
{% if config.extra.show_word_count %}
    <li> <span> {{ page.word_count }} words </span></li>
{% endif %}
{% endmacro %}

{% macro reading_time() %}
{% if config.extra.show_reading_time %}
    <li> <span> {% if page.reading_time > 1  %} {{ page.reading_time}} minutes {% elif page.reading_time == 0  %} less minute {% else %} {{ page.reading_time}} minute {% endif %} to read </span></li>
{% endif %}
{% endmacro %}

